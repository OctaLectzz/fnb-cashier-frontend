import{_ as N,Q as G,a as H,b as T}from"./NavbarComponent.26f6c293.js";import{Q as U}from"./QAvatar.96b7cbee.js";import{r,o as b,N as K,A as P,x as m,B as q,C as t,j as e,aF as w,a5 as i,aa as s,ax as j,a9 as d,ab as h,y as f,a6 as O,F as R,aG as x,av as c,K as W,D as J,aH as X}from"./index.4b455d6d.js";import{Q as Y}from"./QBtnDropdown.194f83c9.js";import{Q as p,a as o}from"./QItem.bbd7d839.js";import{Q as Z}from"./QSpace.629e5fb5.js";import{Q as ee,a as ae}from"./QLayout.22f8fc86.js";import{l as te}from"./index.820023a3.js";import{currentbranch as B}from"./axios.7d27b938.js";import{u as se}from"./employee-store.ad10fc22.js";import{u as oe}from"./setting-store.0b7772ac.js";import{u as ne}from"./branch-store.16046eac.js";import{u as le}from"./vue-i18n.runtime.f1e77c75.js";import"./QResizeObserver.0f83d459.js";import"./TouchPan.843c03c9.js";import"./touch.9135741d.js";import"./selection.c802d758.js";import"./format.959830d0.js";import"./QItemLabel.625aaa4e.js";import"./QSkeleton.7dcd0e2f.js";import"./ClosePopup.aea1e414.js";import"./use-quasar.9bc68b2c.js";import"./i18n.98993dd7.js";import"./auth-store.e16424b4.js";import"./QMenu.e94dcc54.js";const re={class:"flex flex-center q-pa-sm"},ie={class:"text-left q-mx-sm"},me={style:{"font-size":"11px"}},de={class:"q-pa-md"},ue={class:"text-h6"},ce={class:"menu-text-header q-mx-md q-mb-sm",style:{"font-size":"11px"}},pe={key:0},ve={class:"menu-text-header q-mx-md q-mb-sm",style:{"font-size":"11px"}},he={key:0},fe={class:"menu-text-header q-mx-md q-mb-sm",style:{"font-size":"11px"}},ge={key:0},Ke={__name:"MainLayout",setup(be){const{t:C}=le(),Q=r({}),_=r(!1),I=async()=>{_.value=!0;try{const a=await se().profile();Q.value=a.data.data}catch(a){console.error("Error fetching data:",a),te.error(C("auth.expiredMsg")),localStorage.removeItem("token"),localStorage.removeItem("employeetoken"),localStorage.removeItem("branch"),window.location.reload()}_.value=!1};b(()=>{I()});const M=r({}),D=async()=>{try{const a=await oe().show(1);M.value=a.data.data}catch(a){console.error("Error fetching data:",a)}};b(()=>{D()});const g=r(!1),u=r(!1),$=r(!1),y=()=>{$.value=window.innerWidth>1023},L=()=>{$.value?u.value=!u.value:g.value=!g.value};b(()=>{y(),window.addEventListener("resize",y)}),K(()=>{window.removeEventListener("resize",y)});const S=r(""),z=r(B),v=r(""),k=r([]),A=async()=>{try{const a=await ne().all();k.value=a.data.data.filter(n=>n.status===1),v.value=k.value.find(n=>n.id===B).name}catch(a){console.error("Error fetching data:",a)}};b(()=>{A()});const E=a=>{localStorage.setItem("branch",a.id),v.value=a.name,window.location.reload()};return(a,n)=>{const F=P("router-view");return m(),q(ee,{view:"lHh Lpr lFf"},{default:t(()=>[e(G,{class:w([a.$q.dark.isActive?"bg-dark text-white":"","text-dark q-py-sm"]),style:{"background-color":"#ececf1"},elevated:""},{default:t(()=>[e(N,{profile:Q.value,loading:_.value,onSidebar:L},null,8,["profile","loading"])]),_:1},8,["class"]),e(T,{modelValue:g.value,"onUpdate:modelValue":n[2]||(n[2]=l=>g.value=l),mini:u.value,width:250,class:w([a.$q.dark.isActive?"bg-dark":"bg-grey-10","text-white"]),bordered:"","show-if-above":""},{default:t(()=>[e(Z,null,{default:t(()=>[i("div",re,[e(Y,{rounded:"",dense:"",flat:"",push:"","no-caps":""},{label:t(()=>[e(U,{icon:"store","text-color":"white",class:"q-mx-sm"}),i("div",ie,[i("div",me,s(a.$t("dashboard.outletText")),1),i("div",null,s(v.value.length>14?v.value.slice(0,14)+"...":v.value),1)])]),default:t(()=>[i("div",de,[i("div",ue,s(a.$t("dashboard.outletListText")),1),e(j,{modelValue:S.value,"onUpdate:modelValue":n[0]||(n[0]=l=>S.value=l),placeholder:a.$t("public.searchText"),class:"q-my-sm",debounce:"300",outlined:"",dense:""},{append:t(()=>[e(d,{name:"search"})]),_:1},8,["modelValue","placeholder"]),e(h,{class:"q-my-md"}),(m(!0),f(R,null,O(k.value,l=>(m(),f("div",{key:l.id},[e(X,{modelValue:z.value,"onUpdate:modelValue":n[1]||(n[1]=V=>z.value=V),val:l.id,label:l.name,onClick:V=>E(l)},null,8,["modelValue","val","label","onClick"])]))),128))])]),_:1})]),e(h,{dark:""}),e(H,{style:{height:"86vh"}},{default:t(()=>[e(h,{class:"q-mb-md"}),i("div",ce,[u.value?x("",!0):(m(),f("span",pe,s(a.$t("dashboard.main.sidebar.mainGroup")),1))]),e(p,{to:{name:"main.home"},"active-class":"q-item-no-link-highlighting menu-active",class:"menu-click menu-text"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(d,{name:"home",size:"20px"})]),_:1}),e(o,null,{default:t(()=>[c(s(a.$t("dashboard.main.sidebar.homeMenu")),1)]),_:1})]),_:1}),e(p,{to:{name:"main.branch"},"active-class":"q-item-no-link-highlighting menu-active",class:"menu-click menu-text"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(d,{name:"business",size:"20px"})]),_:1}),e(o,null,{default:t(()=>[c(s(a.$t("dashboard.main.sidebar.branchMenu")),1)]),_:1})]),_:1}),e(h,{class:"q-mb-md q-mt-sm"}),i("div",ve,[u.value?x("",!0):(m(),f("span",he,s(a.$t("dashboard.main.sidebar.managementGroup")),1))]),e(p,{to:{name:"main.category"},"active-class":"q-item-no-link-highlighting menu-active",class:"menu-click menu-text"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(d,{name:"category",size:"20px"})]),_:1}),e(o,null,{default:t(()=>[c(s(a.$t("dashboard.main.sidebar.categoryMenu")),1)]),_:1})]),_:1}),e(p,{to:{name:"main.product"},"active-class":"q-item-no-link-highlighting menu-active",class:"menu-click menu-text"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(d,{name:"restaurant_menu",size:"20px"})]),_:1}),e(o,null,{default:t(()=>[c(s(a.$t("dashboard.main.sidebar.productMenu")),1)]),_:1})]),_:1}),e(h,{class:"q-mb-md q-mt-sm"}),i("div",fe,[u.value?x("",!0):(m(),f("span",ge,s(a.$t("dashboard.main.sidebar.cashierGroup")),1))]),e(p,{to:{name:"main.transaction"},"active-class":"q-item-no-link-highlighting menu-active",class:"menu-click menu-text"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(d,{name:"point_of_sale",size:"20px"})]),_:1}),e(o,null,{default:t(()=>[c(s(a.$t("dashboard.main.sidebar.transactionMenu")),1)]),_:1})]),_:1}),e(p,{to:{name:"main.transactionhistory"},"active-class":"q-item-no-link-highlighting menu-active",class:"menu-click menu-text"},{default:t(()=>[e(o,{avatar:""},{default:t(()=>[e(d,{name:"receipt_long",size:"20px"})]),_:1}),e(o,null,{default:t(()=>[c(s(a.$t("dashboard.main.sidebar.transactionHistoryMenu")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","mini","class"]),e(ae,{class:w(a.$q.dark.isActive?"bg-grey-10":"bg-grey-3"),style:{"min-height":"100vh"}},{default:t(()=>[e(F,null,{default:t(({Component:l})=>[(m(),q(W,null,[(m(),q(J(l)))],1024))]),_:1})]),_:1},8,["class"])]),_:1})}}};export{Ke as default};
