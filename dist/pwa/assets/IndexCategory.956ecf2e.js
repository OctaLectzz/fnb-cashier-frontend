import{Q as R}from"./QTooltip.f1d1a369.js";import{r as b,c as G,x as $,y as z,j as e,C as t,a7 as A,a8 as k,a5 as l,aa as s,aw as Q,a4 as m,ab as I,av as p,ax as T,bC as O,at as y,a_ as Z,o as ee,as as ae,B as U,aF as S,a9 as P,bs as F,a6 as te,F as oe,au as le}from"./index.c5c224d7.js";import{Q as se,a as de,b as D,c as re}from"./QTable.a083a63f.js";import{Q as ne}from"./QPage.3aaead71.js";import{l as w}from"./index.312ab613.js";import{u as ie}from"./use-quasar.b8bd78f1.js";import{currentbranch as H}from"./axios.77a133fc.js";import{u as E}from"./category-store.09827dc8.js";import{a as J}from"./QSpace.a03e9777.js";import{Q as K}from"./QSpinnerGears.6f2d9496.js";import{Q as W}from"./QForm.a8be0ad3.js";import{C as B}from"./ClosePopup.92e28685.js";import{u as N}from"./vue-i18n.runtime.b7fd988f.js";import"./QMenu.00791af1.js";import"./selection.eb4ba370.js";import"./QSelect.c9c2d97b.js";import"./QItem.af557ec6.js";import"./QItemLabel.ccd450ac.js";import"./format.959830d0.js";import"./use-fullscreen.e292b254.js";const ce={class:"text-h6"},ue={class:"col-md-10 col-xs-12 q-pa-sm"},me={class:"text-bold"},ge={class:"text-red"},pe={class:"col-md-10 col-xs-12 q-pa-sm"},be={class:"text-bold"},fe={class:"text-grey"},he={__name:"CreateCategory",emits:["created"],setup(C,{emit:h}){const{t:r}=N(),q=h,n=b({branch_id:H,name:"",description:""}),v=b({name:[o=>!!o||r("dashboard.main.category.validate.nameRequired"),o=>o.length<=50||r("dashboard.main.category.validate.nameMaxLength")]}),c=b(!1),V=G(()=>c.value||!n.value.name),_=async()=>{c.value=!0;try{await E().create(n.value),w.success(r("dashboard.main.category.successCreateMsg")),q("created")}catch(o){console.error("Error submitting form:",o),w.error(o.response.data.message||r("dashboard.main.category.failedCreateMsg"))}c.value=!1};return(o,g)=>($(),z("div",null,[e(W,{onSubmit:_},{default:t(()=>[e(A,{style:{"min-width":"400px"}},{default:t(()=>[e(k,{class:"row items-center q-py-sm"},{default:t(()=>[l("div",ce,s(o.$t("dashboard.main.category.createText")),1),e(J),Q(e(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[B]])]),_:1}),e(I),e(k,{class:"scroll",style:{"max-height":"77vh"}},{default:t(()=>[l("div",ue,[l("div",me,[p(s(o.$t("dashboard.main.category.data.name"))+" ",1),l("span",ge,s(o.$t("public.requiredText")),1)]),e(T,{modelValue:n.value.name,"onUpdate:modelValue":g[0]||(g[0]=f=>n.value.name=f),placeholder:"Makanan",rules:v.value.name,outlined:"",dense:"",required:"",autofocus:""},null,8,["modelValue","rules"])]),l("div",pe,[l("div",be,[p(s(o.$t("dashboard.main.category.data.description"))+" ",1),l("span",fe,s(o.$t("public.optionalText")),1)]),e(T,{modelValue:n.value.description,"onUpdate:modelValue":g[1]||(g[1]=f=>n.value.description=f),type:"textarea",outlined:"",dense:""},null,8,["modelValue"])])]),_:1}),e(I),e(O,{align:"right",class:"text-primary"},{default:t(()=>[Q(e(m,{color:"primary",label:y(r)("public.cancelText"),flat:""},null,8,["label"]),[[B]]),e(m,{type:"submit",color:"primary",label:y(r)("public.createText"),loading:c.value,disable:V.value},{loading:t(()=>[e(K)]),_:1},8,["label","loading","disable"])]),_:1})]),_:1})]),_:1})]))}},ve={class:"text-h6"},ye={class:"col-md-10 col-xs-12 q-pa-sm"},_e={class:"text-bold"},xe={class:"text-red"},$e={class:"col-md-10 col-xs-12 q-pa-sm"},we={class:"text-bold"},Ce={class:"text-grey"},j={__name:"EditCategory",props:["item"],emits:["edited"],setup(C,{emit:h}){const{t:r}=N(),q=h,n=b({id:C.item.id,name:C.item.name,description:C.item.description}),v=b({name:[o=>!!o||r("dashboard.main.category.validate.nameRequired"),o=>o.length<=50||r("dashboard.main.category.validate.nameMaxLength")]}),c=b(!1),V=G(()=>c.value||!n.value.name),_=async()=>{c.value=!0;try{await E().edit(n.value),w.success(r("dashboard.main.category.successEditMsg")),q("edited")}catch(o){console.error("Error submitting form:",o),w.error(o.response.data.message||r("dashboard.main.category.failedEditMsg"))}c.value=!1};return(o,g)=>($(),z("div",null,[e(W,{onSubmit:_},{default:t(()=>[e(A,{style:{"min-width":"400px"}},{default:t(()=>[e(k,{class:"row items-center q-py-sm"},{default:t(()=>[l("div",ve,s(o.$t("dashboard.main.category.editText")),1),e(J),Q(e(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[B]])]),_:1}),e(I),e(k,{class:"scroll",style:{"max-height":"77vh"}},{default:t(()=>[l("div",ye,[l("div",_e,[p(s(o.$t("dashboard.main.category.data.name"))+" ",1),l("span",xe,s(o.$t("public.requiredText")),1)]),e(T,{modelValue:n.value.name,"onUpdate:modelValue":g[0]||(g[0]=f=>n.value.name=f),placeholder:"Makanan",rules:v.value.name,outlined:"",dense:"",required:"",autofocus:""},null,8,["modelValue","rules"])]),l("div",$e,[l("div",we,[p(s(o.$t("dashboard.main.category.data.description"))+" ",1),l("span",Ce,s(o.$t("public.optionalText")),1)]),e(T,{modelValue:n.value.description,"onUpdate:modelValue":g[1]||(g[1]=f=>n.value.description=f),type:"textarea",outlined:"",dense:""},null,8,["modelValue"])])]),_:1}),e(I),e(O,{align:"right",class:"text-primary"},{default:t(()=>[Q(e(m,{color:"primary",label:y(r)("public.cancelText"),flat:""},null,8,["label"]),[[B]]),e(m,{type:"submit",color:"primary",label:y(r)("public.editText"),loading:c.value,disable:V.value},{loading:t(()=>[e(K)]),_:1},8,["label","loading","disable"])]),_:1})]),_:1})]),_:1})]))}},qe={class:"text-body2 text-bold text-center q-pa-md"},Ve={class:"text-h6 text-bold"},ke={class:"text-subtitle2"},Qe={class:"text-long"},Te={class:"text-body1 q-my-md"},De={class:"text-bold"},Ie={class:"text-body1 q-my-md"},Ee={class:"text-bold"},Be={class:"text-body1 q-my-md"},Me={class:"text-bold"},Ue={class:"text-long"},Se={class:"absolute absolute-bottom-right q-pa-md"},oa={__name:"IndexCategory",setup(C){const h=ie(),{t:r}=N(),q=Z(),n=b([]),v=async()=>{try{const d=await E().branch(H);n.value=d.data.data}catch(d){console.error("Error fetching data:",d),d.response.data.status==="failed"&&q.push("/notfound")}};ee(()=>{v()});const c=b(!1),V=()=>{c.value=!1,v()},_=d=>{d.editItemDialog=!1,v()},o=d=>{h.dialog({title:r("dashboard.warningTitle"),message:r("dashboard.warningText"),cancel:!0,persistent:!0}).onOk(async()=>{try{await E().delete(d.id),w.success(r("dashboard.main.category.successDeleteMsg")),v()}catch(u){console.error("Error submitting form:",u),w.error(u.response.data.message||r("dashboard.main.category.failedDeleteMsg"))}})},g=n,f=[{name:"id",field:"id",label:"No",align:"center"},{name:"name",field:"name",label:r("dashboard.main.category.data.name"),align:"center",sortable:!0},{name:"description",field:"description",label:r("dashboard.main.category.data.description"),align:"left"},{name:"action",field:"action",label:r("dashboard.actionTable"),align:"center"}],M=b(""),x=b(!1),L=b({}),X=d=>{d.toggleFullscreen()};return(d,u)=>{const Y=ae("viewer");return $(),U(ne,{class:"q-pa-md"},{default:t(()=>[Q(($(),U(se,{pagination:L.value,"onUpdate:pagination":u[4]||(u[4]=a=>L.value=a),"rows-per-page-options":[10,20,30],class:S([y(h).dark.isActive?"text-grey-4":"text-grey-9","dashboard-table"]),rows:y(g),columns:f,"hide-header":x.value,grid:x.value,filter:M.value,separator:"cell",title:d.$t("dashboard.main.category.titleText"),"row-key":"__index","virtual-scroll":"",flat:"",bordered:""},{"top-right":t(a=>[e(m,{color:"primary",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:i=>X(a),flat:"",round:"",dense:""},{default:t(()=>[e(R,null,{default:t(()=>[p(s(a.inFullscreen?d.$t("dashboard.fullscreenExitBtn"):d.$t("dashboard.fullscreenBtn")),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),e(m,{color:"primary",icon:x.value?"list":"grid_on",onClick:u[0]||(u[0]=i=>x.value=!x.value),class:"q-mr-sm",flat:"",round:"",dense:""},{default:t(()=>[e(R,null,{default:t(()=>[p(s(x.value?d.$t("dashboard.listBtn"):d.$t("dashboard.gridBtn")),1)]),_:1})]),_:1},8,["icon"]),e(T,{modelValue:M.value,"onUpdate:modelValue":u[1]||(u[1]=i=>M.value=i),placeholder:d.$t("public.searchText"),debounce:"300",outlined:"",dense:""},{append:t(()=>[e(P,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"top-left":t(()=>[e(m,{color:"primary",label:d.$t("dashboard.main.category.createText"),class:"shadow-3 q-my-sm",onClick:u[2]||(u[2]=a=>c.value=!0),"no-caps":""},null,8,["label"]),e(F,{modelValue:c.value,"onUpdate:modelValue":u[3]||(u[3]=a=>c.value=a),persistent:""},{default:t(()=>[e(he,{onCreated:V})]),_:1},8,["modelValue"])]),header:t(a=>[e(de,{props:a},{default:t(()=>[($(!0),z(oe,null,te(a.cols,i=>($(),U(re,{key:i.name,props:a,class:S(y(h).dark.isActive?"bg-blue-grey-10":"bg-grey-2"),style:{"font-weight":"bolder","font-size":"13px"}},{default:t(()=>[p(s(i.label),1)]),_:2},1032,["props","class"]))),128))]),_:2},1032,["props"])]),"no-data":t(()=>[l("div",qe,[e(P,{name:"warning_amber",size:"25px",class:"q-mx-sm"}),p(" "+s(d.$t("dashboard.noDataText")),1)])]),"body-cell-id":t(a=>[e(D,{props:a},{default:t(()=>[p(s(a.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-name":t(a=>[e(D,{props:a},{default:t(()=>[l("div",Ve,s(a.row.name),1),l("div",ke,s(a.row.slug),1)]),_:2},1032,["props"])]),"body-cell-description":t(a=>[e(D,{props:a},{default:t(()=>[l("div",Qe,s(a.row.description),1)]),_:2},1032,["props"])]),"body-cell-action":t(a=>[e(D,{props:a},{default:t(()=>[e(m,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:i=>a.row.editItemDialog=!0,dense:"",round:""},{default:t(()=>[e(F,{modelValue:a.row.editItemDialog,"onUpdate:modelValue":i=>a.row.editItemDialog=i,persistent:""},{default:t(()=>[e(j,{onEdited:i=>_(a.row),item:a.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(m,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:i=>o(a.row),dense:"",round:""},null,8,["onClick"])]),_:2},1032,["props"])]),item:t(a=>[l("div",{class:"dashboard-card q-pa-md col-xs-12 col-sm-4 col-md-4 col-lg-4 grid-style-transition",style:le(a.selected?"transform: scale(0.95);":"")},[e(A,{class:S([y(h).dark.isActive?"text-grey-4":"text-grey-9","dashboard-card q-pa-md"])},{default:t(()=>[e(k,{class:"q-pb-xl"},{default:t(()=>[l("div",Te,[l("span",De,s(d.$t("dashboard.main.category.data.name"))+" :",1),p(" "+s(a.row.name),1)]),l("div",Ie,[l("span",Ee,s(d.$t("dashboard.main.category.data.slug"))+" :",1),p(" "+s(a.row.slug),1)]),l("div",Be,[l("span",Me,s(d.$t("dashboard.main.category.data.description"))+" :",1),l("span",Ue,s(a.row.description),1)])]),_:2},1024),l("div",Se,[e(m,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:i=>a.row.editItemDialog=!0,dense:"",round:""},{default:t(()=>[e(F,{modelValue:a.row.editItemDialog,"onUpdate:modelValue":i=>a.row.editItemDialog=i,persistent:""},{default:t(()=>[e(j,{onEdited:i=>_(a.row),item:a.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(m,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:i=>o(a.row),dense:"",round:""},null,8,["onClick"])])]),_:2},1032,["class"])],4)]),_:1},8,["pagination","class","rows","hide-header","grid","filter","title"])),[[Y]])]),_:1})}}};export{oa as default};
