import{r as a,o as v,x as k,B as $,C as u,j as r,a5 as t,at as q,au as S,aa as o,av as l,ax as y,a4 as T,a7 as Q}from"./index.c5c224d7.js";import{Q as V}from"./QSpinnerHourglass.2467b9a8.js";import{Q as E}from"./QForm.a8be0ad3.js";import{Q as I}from"./QPage.3aaead71.js";import{l as f}from"./index.312ab613.js";import{url as M}from"./axios.77a133fc.js";import{u as B}from"./auth-store.1432633d.js";import{u as C}from"./profile-store.cac1d1d8.js";import{u as F}from"./setting-store.9a95c5df.js";import{u as P}from"./vue-i18n.runtime.b7fd988f.js";const j={class:"row justify-center q-my-sm"},z=["src"],L={class:"text-h5 text-bold text-center"},N={class:"text-body1 text-center q-mb-lg"},D={class:"row justify-center"},R={class:"col-sm-8 col-xs-11"},U={for:"nip"},A={class:"text-red"},H={class:"col-sm-8 col-xs-11"},W={for:"pin"},G={class:"text-red"},J={class:"col-sm-8 col-xs-11 q-mt-sm"},K={class:"q-mt-lg text-center text-grey-7",style:{"font-size":"11px"}},O={href:"#",target:"_blank",rel:"noopener noreferrer",class:"text-link text-primary"},X={href:"#",target:"_blank",rel:"noopener noreferrer",class:"text-link text-primary"},Y={href:"#",target:"_blank",rel:"noopener noreferrer",class:"text-link text-primary"},de={__name:"EmployeeLoginPage",setup(Z){const{t:n}=P(),_=a(!0),x=a({}),b=async()=>{try{const e=await C().profile();x.value=e.data.data}catch(e){console.error("Error fetching data:",e),f.error(n("auth.expiredMsg")),localStorage.removeItem("token"),localStorage.removeItem("employeetoken"),localStorage.removeItem("branch"),window.location.reload()}};v(()=>{b()});const d=a({}),w=async()=>{try{const e=await F().show(1);d.value=e.data.data,_.value=!1}catch(e){console.error("Error fetching data:",e)}};v(()=>{w()});const c=a(""),m=a(""),g={nip:[e=>!!e||n("auth.validate.nipRequired")],pin:[e=>!!e||n("auth.validate.pinRequired")]},i=a(!1),h=async()=>{i.value=!0;try{await B().employee(c.value,m.value),f.success(n("auth.successEmployeeLoginMsg")),window.location.reload()}catch(e){console.error("Error submitting form:",e),f.error(n("auth.failedEmployeeLoginMsg"))}i.value=!1};return(e,s)=>(k(),$(I,{class:"flex flex-center"},{default:u(()=>[r(Q,{class:"q-pa-md",style:{"border-radius":"30px"}},{default:u(()=>[t("div",j,[t("img",{src:q(M)+"/settings/"+d.value.logo,style:S("width:"+d.value.logo_size+"px")},null,12,z)]),t("div",L,o(e.$t("auth.employeeWelcomeMsg")),1),t("div",N,o(e.$t("auth.employeeDescriptionMsg")),1),r(E,{onSubmit:h},{default:u(()=>[t("div",D,[t("div",R,[t("label",U,[l(o(e.$t("auth.nipForm"))+" ",1),t("span",A,o(e.$t("public.requiredText")),1)]),r(y,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=p=>c.value=p),placeholder:"1234567890",rules:g.nip,mask:"####################",outlined:"",dense:"",required:"",autofocus:""},null,8,["modelValue","rules"])]),t("div",H,[t("label",W,[l(o(e.$t("auth.pinForm"))+" ",1),t("span",G,o(e.$t("public.requiredText")),1)]),r(y,{type:"password",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=p=>m.value=p),placeholder:"********",rules:g.pin,mask:"######",outlined:"",dense:"",required:""},null,8,["modelValue","rules"])]),t("div",J,[r(T,{type:"submit",color:"primary",label:e.$t("auth.signInText"),class:"full-width q-mt-sm",loading:i.value,disable:i.value,onClick:h},{loading:u(()=>[r(V,{class:"on-left"}),l(" "+o(e.$t("public.loadingText")),1)]),_:1},8,["label","loading","disable"])])])]),_:1}),t("div",K,[t("div",null,o(e.$t("auth.permissionText1")),1),t("div",null,[t("a",O,o(e.$t("auth.termsText")),1),l(" "+o(e.$t("auth.permissionText2")),1)]),t("div",null,[t("a",X,o(e.$t("auth.privacyText")),1),s[2]||(s[2]=l(" . ")),t("a",Y,o(e.$t("auth.noticeText")),1),s[3]||(s[3]=l(" . "))])])]),_:1})]),_:1}))}};export{de as default};
