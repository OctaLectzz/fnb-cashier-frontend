import{Q as oe}from"./QTooltip.500b7a29.js";import{bH as qe,E as ke,aX as ie,aM as Ve,a0 as Ce,aN as Ie,a1 as Ee,r as x,b1 as Se,aO as Me,c as V,w as G,N as Qe,h as g,g as De,aW as Le,ab as k,aw as H,bI as Ue,J as Be,a9 as W,al as Pe,x as p,y as A,j as e,C as d,a7 as z,a8 as U,a5 as n,aa as h,a4 as w,av as C,ax as le,bJ as ne,F as B,a6 as P,bF as N,B as X,bC as ue,at as q,a_ as Oe,o as Re,bs as ee,aF as D,au as Ne}from"./index.4b455d6d.js";import{a as je,b as J,Q as Fe,c as He}from"./QTable.d1437a3c.js";import{Q as ze}from"./QPage.588b5698.js";import{l as j}from"./index.820023a3.js";import{u as Ke}from"./use-quasar.9bc68b2c.js";import{Q as Je,u as Y}from"./role-store.5ce7dbc0.js";import{a as ce,Q as me}from"./QSpace.629e5fb5.js";import{Q as We,a as O}from"./QItem.bbd7d839.js";import{Q as de}from"./QItemLabel.625aaa4e.js";import{Q as be}from"./QSpinnerGears.2f99577e.js";import{Q as ve}from"./QForm.9927cc01.js";import{C as Z}from"./ClosePopup.aea1e414.js";import{u as ae}from"./vue-i18n.runtime.f1e77c75.js";import"./QMenu.e94dcc54.js";import"./selection.c802d758.js";import"./QSelect.d220868d.js";import"./format.959830d0.js";import"./use-fullscreen.cb2c894f.js";import"./axios.7d27b938.js";const L=qe({}),Xe=Object.keys(ie);var he=ke({name:"QExpansionItem",props:{...ie,...Ve,...Ce,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Ie,"click","afterShow","afterHide"],setup(t,{slots:f,emit:r}){const{proxy:{$q:I}}=De(),o=Ee(t,I),v=x(t.modelValue!==null?t.modelValue:t.defaultOpened),$=x(null),E=Se(),{show:Q,hide:S,toggle:y}=Me({showing:v});let T,_;const l=V(()=>`q-expansion-item q-item-type q-expansion-item--${v.value===!0?"expanded":"collapsed"} q-expansion-item--${t.popup===!0?"popup":"standard"}`),a=V(()=>{if(t.contentInsetLevel===void 0)return null;const c=I.lang.rtl===!0?"Right":"Left";return{["padding"+c]:t.contentInsetLevel*56+"px"}}),s=V(()=>t.disable!==!0&&(t.href!==void 0||t.to!==void 0&&t.to!==null&&t.to!=="")),u=V(()=>{const c={};return Xe.forEach(M=>{c[M]=t[M]}),c}),m=V(()=>s.value===!0||t.expandIconToggle!==!0),i=V(()=>t.expandedIcon!==void 0&&v.value===!0?t.expandedIcon:t.expandIcon||I.iconSet.expansionItem[t.denseToggle===!0?"denseIcon":"icon"]),b=V(()=>t.disable!==!0&&(s.value===!0||t.expandIconToggle===!0)),F=V(()=>({expanded:v.value===!0,detailsId:E.value,toggle:y,show:Q,hide:S})),R=V(()=>{const c=t.toggleAriaLabel!==void 0?t.toggleAriaLabel:I.lang.label[v.value===!0?"collapse":"expand"](t.label);return{role:"button","aria-expanded":v.value===!0?"true":"false","aria-controls":E.value,"aria-label":c}});G(()=>t.group,c=>{_!==void 0&&_(),c!==void 0&&se()});function pe(c){s.value!==!0&&y(c),r("click",c)}function fe(c){c.keyCode===13&&te(c,!0)}function te(c,M){M!==!0&&$.value!==null&&$.value.focus(),y(c),Pe(c)}function ye(){r("afterShow")}function ge(){r("afterHide")}function se(){T===void 0&&(T=Le()),v.value===!0&&(L[t.group]=T);const c=G(v,K=>{K===!0?L[t.group]=T:L[t.group]===T&&delete L[t.group]}),M=G(()=>L[t.group],(K,$e)=>{$e===T&&K!==void 0&&K!==T&&S()});_=()=>{c(),M(),L[t.group]===T&&delete L[t.group],_=void 0}}function xe(){const c={class:[`q-focusable relative-position cursor-pointer${t.denseToggle===!0&&t.switchToggleSide===!0?" items-end":""}`,t.expandIconClass],side:t.switchToggleSide!==!0,avatar:t.switchToggleSide},M=[g(W,{class:"q-expansion-item__toggle-icon"+(t.expandedIcon===void 0&&v.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:i.value})];return b.value===!0&&(Object.assign(c,{tabindex:0,...R.value,onClick:te,onKeyup:fe}),M.unshift(g("div",{ref:$,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),g(O,c,()=>M)}function Te(){let c;return f.header!==void 0?c=[].concat(f.header(F.value)):(c=[g(O,()=>[g(de,{lines:t.labelLines},()=>t.label||""),t.caption?g(de,{lines:t.captionLines,caption:!0},()=>t.caption):null])],t.icon&&c[t.switchToggleSide===!0?"push":"unshift"](g(O,{side:t.switchToggleSide===!0,avatar:t.switchToggleSide!==!0},()=>g(W,{name:t.icon})))),t.disable!==!0&&t.hideExpandIcon!==!0&&c[t.switchToggleSide===!0?"unshift":"push"](xe()),c}function _e(){const c={ref:"item",style:t.headerStyle,class:t.headerClass,dark:o.value,disable:t.disable,dense:t.dense,insetLevel:t.headerInsetLevel};return m.value===!0&&(c.clickable=!0,c.onClick=pe,Object.assign(c,s.value===!0?u.value:R.value)),g(We,c,Te)}function we(){return H(g("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:a.value,id:E.value},Be(f.default)),[[Ue,v.value]])}function Ae(){const c=[_e(),g(Je,{duration:t.duration,onShow:ye,onHide:ge},we)];return t.expandSeparator===!0&&c.push(g(k,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:o.value}),g(k,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:o.value})),c}return t.group!==void 0&&se(),Qe(()=>{_!==void 0&&_()}),()=>g("div",{class:l.value},[g("div",{class:"q-expansion-item__container relative-position"},Ae())])}});const Ye={class:"text-h6"},Ze={class:"row justify-center"},Ge={class:"col-8 q-pa-sm"},el={class:"text-bold"},ll={class:"text-red"},al={class:"col-4 q-pa-sm"},tl={class:"text-bold"},sl={class:"text-red"},ol={class:"text-body2"},dl={class:"col-12"},rl={class:"q-my-sm"},il={class:"text-h6 text-bold"},nl={class:"row"},ul={class:"row items-center"},cl={__name:"CreateRole",emits:["created"],setup(t,{emit:f}){const{t:r}=ae(),I=f,o=x({name:"",permissions:[],selectAll:!1}),v=x([{title:r("dashboard.menu.mainMenu"),selectAll:!1,permissionMenus:[{name:r("dashboard.main.sidebar.branchMenu"),permissions:[{value:"view branches",label:"dashboard.employee.role.data.viewText"},{value:"create branches",label:"dashboard.employee.role.data.createText"},{value:"edit branches",label:"dashboard.employee.role.data.editText"},{value:"delete branches",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.categoryMenu"),permissions:[{value:"view categories",label:"dashboard.employee.role.data.viewText"},{value:"create categories",label:"dashboard.employee.role.data.createText"},{value:"edit categories",label:"dashboard.employee.role.data.editText"},{value:"delete categories",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.productMenu"),permissions:[{value:"view products",label:"dashboard.employee.role.data.viewText"},{value:"create products",label:"dashboard.employee.role.data.createText"},{value:"edit products",label:"dashboard.employee.role.data.editText"},{value:"delete products",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.transactionMenu"),permissions:[{value:"view transactions",label:"dashboard.employee.role.data.viewText"},{value:"create transactions",label:"dashboard.employee.role.data.createText"},{value:"edit transactions",label:"dashboard.employee.role.data.editText"},{value:"delete transactions",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.transactionHistoryMenu"),permissions:[{value:"view transactionhistories",label:"dashboard.employee.role.data.viewText"},{value:"create transactionhistories",label:"dashboard.employee.role.data.createText"},{value:"edit transactionhistories",label:"dashboard.employee.role.data.editText"},{value:"delete transactionhistories",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1}]},{title:r("dashboard.menu.employeeMenu"),selectAll:!1,permissionMenus:[{name:r("dashboard.employee.sidebar.roleMenu"),permissions:[{value:"view roles",label:"dashboard.employee.role.data.viewText"},{value:"create roles",label:"dashboard.employee.role.data.createText"},{value:"edit roles",label:"dashboard.employee.role.data.editText"},{value:"delete roles",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.employee.sidebar.scheduleMenu"),permissions:[{value:"view schedules",label:"dashboard.employee.role.data.viewText"},{value:"create schedules",label:"dashboard.employee.role.data.createText"},{value:"edit schedules",label:"dashboard.employee.role.data.editText"},{value:"delete schedules",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.employee.sidebar.employeeMenu"),permissions:[{value:"view employees",label:"dashboard.employee.role.data.viewText"},{value:"create employees",label:"dashboard.employee.role.data.createText"},{value:"edit employees",label:"dashboard.employee.role.data.editText"},{value:"delete employees",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1}]}]),$=()=>{o.value.selectAll?v.value.forEach(l=>{l.permissionMenus.forEach(a=>{a.selectAll=!0,a.permissions.forEach(s=>{o.value.permissions.includes(s.value)||o.value.permissions.push(s.value)})})}):v.value.forEach(l=>{l.permissionMenus.forEach(a=>{a.selectAll=!1,a.permissions.forEach(s=>{const u=o.value.permissions.indexOf(s.value);u>-1&&o.value.permissions.splice(u,1)})})})},E=l=>{l.selectAll?l.permissionMenus.forEach(a=>{a.selectAll=!0,a.permissions.forEach(s=>{o.value.permissions.includes(s.value)||o.value.permissions.push(s.value)})}):l.permissionMenus.forEach(a=>{a.selectAll=!1,a.permissions.forEach(s=>{const u=o.value.permissions.indexOf(s.value);u>-1&&o.value.permissions.splice(u,1)})}),o.value.selectAll=v.value.every(a=>a.selectAll)},Q=l=>{l.selectAll?l.permissions.forEach(a=>{o.value.permissions.includes(a.value)||o.value.permissions.push(a.value)}):l.permissions.forEach(a=>{const s=o.value.permissions.indexOf(a.value);s>-1&&o.value.permissions.splice(s,1)}),l.selectAll=l.permissions.every(a=>o.value.permissions.includes(a.value)),v.value.forEach(a=>{a.selectAll=a.permissionMenus.every(s=>s.selectAll)}),o.value.selectAll=v.value.every(a=>a.permissionMenus.every(s=>s.selectAll))},S=x({name:[l=>!!l||r("dashboard.employee.role.validate.nameRequired"),l=>l.length<=255||r("dashboard.employee.role.validate.nameMaxLength")]}),y=x(!1),T=V(()=>y.value||!o.value.name),_=async()=>{y.value=!0;try{await Y().create(o.value),j.success(r("dashboard.employee.role.successCreateMsg")),I("created")}catch(l){console.error("Error submitting form:",l),j.error(l.response.data.message||r("dashboard.employee.role.failedCreateMsg"))}y.value=!1};return(l,a)=>(p(),A("div",null,[e(ve,{onSubmit:_},{default:d(()=>[e(z,{style:{"min-width":"400px"}},{default:d(()=>[e(U,{class:"row items-center q-py-sm"},{default:d(()=>[n("div",Ye,h(l.$t("dashboard.employee.role.createText")),1),e(ce),H(e(w,{icon:"close",flat:"",round:"",dense:""},null,512),[[Z]])]),_:1}),e(k),e(U,{class:"scroll",style:{height:"77vh"}},{default:d(()=>[n("div",Ze,[n("div",Ge,[n("div",el,[C(h(l.$t("dashboard.employee.role.data.name"))+" ",1),n("span",ll,h(l.$t("public.requiredText")),1)]),e(le,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value.name=s),placeholder:l.$t("public.exampleText")+l.$t("dashboard.employee.role.data.namePlaceholder"),rules:S.value.name,outlined:"",dense:"",required:"",autofocus:""},null,8,["modelValue","placeholder","rules"])]),n("div",al,[n("div",tl,[C(h(l.$t("dashboard.employee.role.data.selectAll"))+" ",1),n("span",sl,h(l.$t("public.requiredText")),1)]),e(ne,{modelValue:o.value.selectAll,"onUpdate:modelValue":a[1]||(a[1]=s=>o.value.selectAll=s),color:"primary",size:"xl","keep-color":"",onClick:$},null,8,["modelValue"]),n("div",ol,h(l.$t("dashboard.employee.role.data.permissionsPlaceholder")),1)]),n("div",dl,[e(k,{class:"q-my-md"}),n("div",rl,"Data : "+h(o.value.permissions),1),e(k,{class:"q-my-md"})]),(p(!0),A(B,null,P(v.value,(s,u)=>(p(),A("div",{key:u,class:"col-12 q-pa-sm"},[n("span",il,h(s.title),1),e(N,{modelValue:s.selectAll,"onUpdate:modelValue":m=>s.selectAll=m,label:l.$t("dashboard.employee.role.data.selectAll"),onClick:m=>E(s)},null,8,["modelValue","onUpdate:modelValue","label","onClick"]),n("div",nl,[(p(!0),A(B,null,P(s.permissionMenus,(m,i)=>(p(),A("div",{key:i,class:"col-md-4 col-xs-12 q-pa-sm"},[e(me,{bordered:"",class:"rounded-borders"},{default:d(()=>[e(he,{"default-opened":""},{header:d(()=>[e(O,{class:"text-h6"},{default:d(()=>[C(h(m.name),1)]),_:2},1024),e(O,{side:""},{default:d(()=>[n("div",ul,[e(N,{modelValue:m.selectAll,"onUpdate:modelValue":b=>m.selectAll=b,label:l.$t("dashboard.employee.role.data.selectAll"),onClick:b=>Q(m)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])])]),_:2},1024)]),default:d(()=>[e(k),e(z,{class:"q-py-lg"},{default:d(()=>[e(U,{class:"row"},{default:d(()=>[(p(!0),A(B,null,P(m.permissions,(b,F)=>(p(),X(N,{key:F,modelValue:o.value.permissions,"onUpdate:modelValue":a[2]||(a[2]=R=>o.value.permissions=R),val:b.value,label:l.$t(b.label),class:"col"},null,8,["modelValue","val","label"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])]))),128))])]),_:1}),e(k),e(ue,{align:"right",class:"text-primary"},{default:d(()=>[H(e(w,{color:"primary",label:q(r)("public.cancelText"),flat:""},null,8,["label"]),[[Z]]),e(w,{type:"submit",color:"primary",label:q(r)("public.createText"),loading:y.value,disable:T.value},{loading:d(()=>[e(be)]),_:1},8,["label","loading","disable"])]),_:1})]),_:1})]),_:1})]))}},ml={class:"text-h6"},bl={class:"row justify-center"},vl={class:"col-8 q-pa-sm"},hl={class:"text-bold"},pl={class:"text-red"},fl={class:"col-4 q-pa-sm"},yl={class:"text-bold"},gl={class:"text-red"},xl={class:"text-body2"},Tl={class:"col-12"},_l={class:"q-my-sm"},wl={class:"text-h6 text-bold"},Al={class:"row"},$l={class:"row items-center"},re={__name:"EditRole",props:["item"],emits:["edited"],setup(t,{emit:f}){const{t:r}=ae(),I=f,o=x({id:t.item.id,name:t.item.name,permissions:t.item.permissions,selectAll:!1}),v=x([{title:r("dashboard.menu.mainMenu"),selectAll:!1,permissionMenus:[{name:r("dashboard.main.sidebar.branchMenu"),permissions:[{value:"view branches",label:"dashboard.employee.role.data.viewText"},{value:"create branches",label:"dashboard.employee.role.data.createText"},{value:"edit branches",label:"dashboard.employee.role.data.editText"},{value:"delete branches",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.categoryMenu"),permissions:[{value:"view categories",label:"dashboard.employee.role.data.viewText"},{value:"create categories",label:"dashboard.employee.role.data.createText"},{value:"edit categories",label:"dashboard.employee.role.data.editText"},{value:"delete categories",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.productMenu"),permissions:[{value:"view products",label:"dashboard.employee.role.data.viewText"},{value:"create products",label:"dashboard.employee.role.data.createText"},{value:"edit products",label:"dashboard.employee.role.data.editText"},{value:"delete products",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.transactionMenu"),permissions:[{value:"view transactions",label:"dashboard.employee.role.data.viewText"},{value:"create transactions",label:"dashboard.employee.role.data.createText"},{value:"edit transactions",label:"dashboard.employee.role.data.editText"},{value:"delete transactions",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.main.sidebar.transactionHistoryMenu"),permissions:[{value:"view transactionhistories",label:"dashboard.employee.role.data.viewText"},{value:"create transactionhistories",label:"dashboard.employee.role.data.createText"},{value:"edit transactionhistories",label:"dashboard.employee.role.data.editText"},{value:"delete transactionhistories",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1}]},{title:r("dashboard.menu.employeeMenu"),selectAll:!1,permissionMenus:[{name:r("dashboard.employee.sidebar.roleMenu"),permissions:[{value:"view roles",label:"dashboard.employee.role.data.viewText"},{value:"create roles",label:"dashboard.employee.role.data.createText"},{value:"edit roles",label:"dashboard.employee.role.data.editText"},{value:"delete roles",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.employee.sidebar.scheduleMenu"),permissions:[{value:"view schedules",label:"dashboard.employee.role.data.viewText"},{value:"create schedules",label:"dashboard.employee.role.data.createText"},{value:"edit schedules",label:"dashboard.employee.role.data.editText"},{value:"delete schedules",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1},{name:r("dashboard.employee.sidebar.employeeMenu"),permissions:[{value:"view employees",label:"dashboard.employee.role.data.viewText"},{value:"create employees",label:"dashboard.employee.role.data.createText"},{value:"edit employees",label:"dashboard.employee.role.data.editText"},{value:"delete employees",label:"dashboard.employee.role.data.deleteText"}],selectAll:!1}]}]),$=()=>{o.value.selectAll?v.value.forEach(l=>{l.permissionMenus.forEach(a=>{a.selectAll=!0,a.permissions.forEach(s=>{o.value.permissions.includes(s.value)||o.value.permissions.push(s.value)})})}):v.value.forEach(l=>{l.permissionMenus.forEach(a=>{a.selectAll=!1,a.permissions.forEach(s=>{const u=o.value.permissions.indexOf(s.value);u>-1&&o.value.permissions.splice(u,1)})})})},E=l=>{l.selectAll?l.permissionMenus.forEach(a=>{a.selectAll=!0,a.permissions.forEach(s=>{o.value.permissions.includes(s.value)||o.value.permissions.push(s.value)})}):l.permissionMenus.forEach(a=>{a.selectAll=!1,a.permissions.forEach(s=>{const u=o.value.permissions.indexOf(s.value);u>-1&&o.value.permissions.splice(u,1)})}),o.value.selectAll=v.value.every(a=>a.selectAll)},Q=l=>{l.selectAll?l.permissions.forEach(a=>{o.value.permissions.includes(a.value)||o.value.permissions.push(a.value)}):l.permissions.forEach(a=>{const s=o.value.permissions.indexOf(a.value);s>-1&&o.value.permissions.splice(s,1)}),l.selectAll=l.permissions.every(a=>o.value.permissions.includes(a.value)),v.value.forEach(a=>{a.selectAll=a.permissionMenus.every(s=>s.selectAll)}),o.value.selectAll=v.value.every(a=>a.permissionMenus.every(s=>s.selectAll))},S=x({name:[l=>!!l||r("dashboard.employee.role.validate.nameRequired"),l=>l.length<=255||r("dashboard.employee.role.validate.nameMaxLength")]}),y=x(!1),T=V(()=>y.value||!o.value.name),_=async()=>{y.value=!0;try{await Y().edit(o.value),j.success(r("dashboard.employee.role.successEditMsg")),I("edited")}catch(l){console.error("Error submitting form:",l),j.error(l.response.data.message||r("dashboard.employee.role.failedEditMsg"))}y.value=!1};return(l,a)=>(p(),A("div",null,[e(ve,{onSubmit:_},{default:d(()=>[e(z,{style:{"min-width":"400px"}},{default:d(()=>[e(U,{class:"row items-center q-py-sm"},{default:d(()=>[n("div",ml,h(l.$t("dashboard.employee.role.editText")),1),e(ce),H(e(w,{icon:"close",flat:"",round:"",dense:""},null,512),[[Z]])]),_:1}),e(k),e(U,{class:"scroll",style:{height:"77vh"}},{default:d(()=>[n("div",bl,[n("div",vl,[n("div",hl,[C(h(l.$t("dashboard.employee.role.data.name"))+" ",1),n("span",pl,h(l.$t("public.requiredText")),1)]),e(le,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>o.value.name=s),placeholder:l.$t("public.exampleText")+l.$t("dashboard.employee.role.data.namePlaceholder"),rules:S.value.name,outlined:"",dense:"",required:"",autofocus:""},null,8,["modelValue","placeholder","rules"])]),n("div",fl,[n("div",yl,[C(h(l.$t("dashboard.employee.role.data.selectAll"))+" ",1),n("span",gl,h(l.$t("public.requiredText")),1)]),e(ne,{modelValue:o.value.selectAll,"onUpdate:modelValue":a[1]||(a[1]=s=>o.value.selectAll=s),color:"primary",size:"xl","keep-color":"",onClick:$},null,8,["modelValue"]),n("div",xl,h(l.$t("dashboard.employee.role.data.permissionsPlaceholder")),1)]),n("div",Tl,[e(k,{class:"q-my-md"}),n("div",_l,"Data : "+h(o.value.permissions),1),e(k,{class:"q-my-md"})]),(p(!0),A(B,null,P(v.value,(s,u)=>(p(),A("div",{key:u,class:"col-12 q-pa-sm"},[n("span",wl,h(s.title),1),e(N,{modelValue:s.selectAll,"onUpdate:modelValue":m=>s.selectAll=m,label:l.$t("dashboard.employee.role.data.selectAll"),onClick:m=>E(s)},null,8,["modelValue","onUpdate:modelValue","label","onClick"]),n("div",Al,[(p(!0),A(B,null,P(s.permissionMenus,(m,i)=>(p(),A("div",{key:i,class:"col-md-4 col-xs-12 q-pa-sm"},[e(me,{bordered:"",class:"rounded-borders"},{default:d(()=>[e(he,{"default-opened":""},{header:d(()=>[e(O,{class:"text-h6"},{default:d(()=>[C(h(m.name),1)]),_:2},1024),e(O,{side:""},{default:d(()=>[n("div",$l,[e(N,{modelValue:m.selectAll,"onUpdate:modelValue":b=>m.selectAll=b,label:l.$t("dashboard.employee.role.data.selectAll"),onClick:b=>Q(m)},null,8,["modelValue","onUpdate:modelValue","label","onClick"])])]),_:2},1024)]),default:d(()=>[e(k),e(z,{class:"q-py-lg"},{default:d(()=>[e(U,{class:"row"},{default:d(()=>[(p(!0),A(B,null,P(m.permissions,(b,F)=>(p(),X(N,{key:F,modelValue:o.value.permissions,"onUpdate:modelValue":a[2]||(a[2]=R=>o.value.permissions=R),val:b.value,label:l.$t(b.label),class:"col"},null,8,["modelValue","val","label"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])]))),128))])]),_:1}),e(k),e(ue,{align:"right",class:"text-primary"},{default:d(()=>[H(e(w,{color:"primary",label:q(r)("public.cancelText"),flat:""},null,8,["label"]),[[Z]]),e(w,{type:"submit",color:"primary",label:q(r)("public.editText"),loading:y.value,disable:T.value},{loading:d(()=>[e(be)]),_:1},8,["label","loading","disable"])]),_:1})]),_:1})]),_:1})]))}},ql={class:"text-body2 text-bold text-center q-pa-md"},kl={class:"text-body1 text-bold"},Vl={class:"flex flex-center"},Cl={class:"text-body1 q-my-md"},Il={class:"text-bold"},El={class:"text-body1 q-mx-sm"},Sl={class:"text-body1 q-my-md"},Ml={class:"text-bold"},Ql={class:"absolute absolute-bottom-right q-pa-md"},la={__name:"IndexRole",setup(t){const f=Ke(),{t:r}=ae(),I=Oe(),o=x([]),v=async()=>{try{const u=await Y().all();o.value=u.data.data}catch(u){console.error("Error fetching data:",u),u.response.data.status==="failed"&&I.push("/notfound")}};Re(()=>{v()});const $=x(!1),E=()=>{$.value=!1,v()},Q=u=>{u.editItemDialog=!1,v()},S=u=>{f.dialog({title:r("dashboard.warningTitle"),message:r("dashboard.warningText"),cancel:!0,persistent:!0}).onOk(async()=>{try{await Y().delete(u.id),j.success(r("dashboard.employee.role.successDeleteMsg")),v()}catch(m){console.error("Error submitting form:",m),j.error(m.response.data.message||r("dashboard.employee.role.failedDeleteMsg"))}})},y=o,T=[{name:"id",field:"id",label:"No",align:"center"},{name:"name",field:"name",label:r("dashboard.employee.role.data.name"),align:"left",sortable:!0},{name:"permissions",field:"permissions",label:r("dashboard.employee.role.data.permissions"),align:"center",sortable:!0},{name:"action",field:"action",label:r("dashboard.actionTable"),align:"center"}],_=x(""),l=x(!1),a=x({}),s=u=>{u.toggleFullscreen()};return(u,m)=>(p(),X(ze,{class:"q-pa-md"},{default:d(()=>[e(Fe,{pagination:a.value,"onUpdate:pagination":m[4]||(m[4]=i=>a.value=i),"rows-per-page-options":[10,20,30],class:D([q(f).dark.isActive?"text-grey-4":"text-grey-9","dashboard-table"]),rows:q(y),columns:T,"hide-header":l.value,grid:l.value,filter:_.value,separator:"cell",title:u.$t("dashboard.employee.role.titleText"),"row-key":"__index","virtual-scroll":"",flat:"",bordered:""},{"top-right":d(i=>[e(w,{color:"primary",icon:i.inFullscreen?"fullscreen_exit":"fullscreen",onClick:b=>s(i),flat:"",round:"",dense:""},{default:d(()=>[e(oe,null,{default:d(()=>[C(h(i.inFullscreen?u.$t("dashboard.fullscreenExitBtn"):u.$t("dashboard.fullscreenBtn")),1)]),_:2},1024)]),_:2},1032,["icon","onClick"]),e(w,{color:"primary",icon:l.value?"list":"grid_on",onClick:m[0]||(m[0]=b=>l.value=!l.value),class:"q-mr-sm",flat:"",round:"",dense:""},{default:d(()=>[e(oe,null,{default:d(()=>[C(h(l.value?u.$t("dashboard.listBtn"):u.$t("dashboard.gridBtn")),1)]),_:1})]),_:1},8,["icon"]),e(le,{modelValue:_.value,"onUpdate:modelValue":m[1]||(m[1]=b=>_.value=b),placeholder:u.$t("public.searchText"),debounce:"300",outlined:"",dense:""},{append:d(()=>[e(W,{name:"search"})]),_:1},8,["modelValue","placeholder"])]),"top-left":d(()=>[e(w,{color:"primary",label:u.$t("dashboard.employee.role.createText"),class:"shadow-3 q-my-sm",onClick:m[2]||(m[2]=i=>$.value=!0),"no-caps":""},null,8,["label"]),e(ee,{modelValue:$.value,"onUpdate:modelValue":m[3]||(m[3]=i=>$.value=i),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":"",persistent:""},{default:d(()=>[e(cl,{onCreated:E})]),_:1},8,["modelValue"])]),header:d(i=>[e(je,{props:i},{default:d(()=>[(p(!0),A(B,null,P(i.cols,b=>(p(),X(He,{key:b.name,props:i,class:D(q(f).dark.isActive?"bg-blue-grey-10":"bg-grey-2"),style:{"font-weight":"bolder","font-size":"13px"}},{default:d(()=>[C(h(b.label),1)]),_:2},1032,["props","class"]))),128))]),_:2},1032,["props"])]),"no-data":d(()=>[n("div",ql,[e(W,{name:"warning_amber",size:"25px",class:"q-mx-sm"}),C(" "+h(u.$t("dashboard.noDataText")),1)])]),"body-cell-id":d(i=>[e(J,{props:i},{default:d(()=>[C(h(i.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-name":d(i=>[e(J,{props:i},{default:d(()=>[n("div",kl,h(i.row.name),1)]),_:2},1032,["props"])]),"body-cell-permissions":d(i=>[e(J,{props:i},{default:d(()=>[n("div",Vl,[n("div",{class:D(["rounded-borders q-pa-xs q-mx-sm",q(f).dark.isActive?"bg-blue-10":"bg-blue-2"])},[n("div",{class:D(["text-bold q-pa-xs",q(f).dark.isActive?"text-blue-2":"text-blue-8"])},h(i.row.permissions.length),3)],2)])]),_:2},1032,["props"])]),"body-cell-action":d(i=>[e(J,{props:i},{default:d(()=>[e(w,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:b=>i.row.editItemDialog=!0,dense:"",round:""},{default:d(()=>[e(ee,{modelValue:i.row.editItemDialog,"onUpdate:modelValue":b=>i.row.editItemDialog=b,"transition-show":"slide-up","transition-hide":"slide-down","full-width":"","full-height":"",persistent:""},{default:d(()=>[e(re,{onEdited:b=>Q(i.row),item:i.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(w,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:b=>S(i.row),dense:"",round:""},null,8,["onClick"])]),_:2},1032,["props"])]),item:d(i=>[n("div",{class:"dashboard-card q-pa-md col-xs-12 col-sm-4 col-md-4 col-lg-4 grid-style-transition",style:Ne(i.selected?"transform: scale(0.95);":"")},[e(z,{class:D([q(f).dark.isActive?"text-grey-4":"text-grey-9","dashboard-card q-pa-md"])},{default:d(()=>[e(U,{class:"q-pb-xl"},{default:d(()=>[n("div",Cl,[n("span",Il,h(u.$t("dashboard.employee.role.data.name"))+" :",1),n("span",El,h(i.row.name),1)]),n("div",Sl,[n("span",Ml,h(u.$t("dashboard.employee.role.data.permissions"))+" :",1),n("span",{class:D(["rounded-borders q-pa-xs q-mx-sm",q(f).dark.isActive?"bg-blue-10":"bg-blue-2"])},[n("span",{class:D(["text-bold q-pa-xs",q(f).dark.isActive?"text-blue-2":"text-blue-8"])},h(i.row.permissions.length),3)],2)])]),_:2},1024),n("div",Ql,[e(w,{color:"warning",field:"edit",icon:"edit",class:"q-mx-xs",onClick:b=>i.row.editItemDialog=!0,dense:"",round:""},{default:d(()=>[e(ee,{modelValue:i.row.editItemDialog,"onUpdate:modelValue":b=>i.row.editItemDialog=b,persistent:""},{default:d(()=>[e(re,{onEdited:b=>Q(i.row),item:i.row},null,8,["onEdited","item"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["onClick"]),e(w,{color:"red",field:"delete",icon:"delete",class:"q-mx-xs",onClick:b=>S(i.row),dense:"",round:""},null,8,["onClick"])])]),_:2},1032,["class"])],4)]),_:1},8,["pagination","class","rows","hide-header","grid","filter","title"])]),_:1}))}};export{la as default};
