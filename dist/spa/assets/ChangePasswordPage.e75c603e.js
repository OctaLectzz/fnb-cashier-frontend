import{a$ as y,r as p,c as q,x as P,B as x,C as l,ae as a,j as r,ag as C,ah as f,aj as i,ak as Q,ax as m,az as c,ai as _,ad as V}from"./index.199a5e3f.js";import{Q as $}from"./QSpinnerGears.7e50aff2.js";import{Q as S}from"./QForm.fdbdeff7.js";import{Q as k}from"./QPage.2ef07c91.js";import{l as v}from"./index.1757aa92.js";import{u as B}from"./profile-store.e8397c42.js";import{u as T}from"./vue-i18n.runtime.bdb4f456.js";import"./axios.afd0666a.js";const j={class:"row justify-center"},F={class:"col-md-8 col-xs-12 q-ma-md"},M={class:"text-body1 text-bold"},N={class:"row justify-center"},R={class:"col-10 q-pa-sm"},I={class:"small mb-1",for:"current_password"},U={class:"text-red"},L={class:"col-10 q-pa-sm"},z={class:"small mb-1",for:"new_password"},D={class:"text-red"},E={class:"col-10 q-pa-sm"},G={class:"small mb-1",for:"confirm_password"},A={class:"text-red"},es={__name:"ChangePasswordPage",setup(H){const{t:d}=T(),b=y(),t=p({current_password:"",new_password:"",confirm_password:""}),o=p({current_password:!0,new_password:!0,confirm_password:!0}),w=p({current_password:[s=>!!s||d("auth.validate.currentPasswordRequired"),s=>s.length>=8||d("auth.validate.currentPasswordMinLength")],new_password:[s=>!!s||d("auth.validate.newPasswordRequired"),s=>s.length>=8||d("auth.validate.newPasswordMinLength")],confirm_password:[s=>!!s||d("auth.validate.passwordConfirmationRequired"),s=>s===t.value.new_password||d("auth.validate.passwordConfirmationSame")]}),u=p(!1),g=q(()=>u.value||!t.value.current_password||!t.value.new_password||!t.value.confirm_password),h=async()=>{u.value=!0;try{await B().changepassword(t.value),v.success(d("profile.successChangePasswordMsg")),b.back(),setTimeout(()=>{window.location.reload()},100)}catch(s){console.error("Error submitting form:",s),v.error(s.response.data.message||d("profile.failedChangePasswordMsg"))}u.value=!1};return(s,e)=>(P(),x(k,{class:"q-my-xl"},{default:l(()=>[e[7]||(e[7]=a("hr",{class:"q-my-md"},null,-1)),r(S,{onSubmit:h},{default:l(()=>[a("div",j,[a("div",F,[r(C,{style:{height:"100%"}},{default:l(()=>[r(f,{class:"bg-blue-grey-1"},{default:l(()=>[a("div",M,i(s.$t("profile.changePasswordCard")),1)]),_:1}),r(Q),r(f,{class:"q-pa-md q-pb-xl"},{default:l(()=>[a("div",N,[a("div",R,[a("label",I,[m(i(s.$t("auth.currentPasswordForm"))+" ",1),a("span",U,i(s.$t("public.requiredText")),1)]),r(c,{type:o.value.current_password?"password":"text",modelValue:t.value.current_password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.current_password=n),id:"current_password",rules:w.value.current_password,outlined:"",dense:"",required:"",autofocus:""},{append:l(()=>[r(_,{name:o.value.current_password?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[0]||(e[0]=n=>o.value.current_password=!o.value.current_password)},null,8,["name"])]),_:1},8,["type","modelValue","rules"])]),a("div",L,[a("label",z,[m(i(s.$t("auth.newPasswordForm"))+" ",1),a("span",D,i(s.$t("public.requiredText")),1)]),r(c,{type:o.value.new_password?"password":"text",modelValue:t.value.new_password,"onUpdate:modelValue":e[3]||(e[3]=n=>t.value.new_password=n),id:"new_password",rules:w.value.new_password,outlined:"",dense:"",required:""},{append:l(()=>[r(_,{name:o.value.new_password?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[2]||(e[2]=n=>o.value.new_password=!o.value.new_password)},null,8,["name"])]),_:1},8,["type","modelValue","rules"])]),a("div",E,[a("label",G,[m(i(s.$t("auth.confirmNewPasswordForm"))+" ",1),a("span",A,i(s.$t("public.requiredText")),1)]),r(c,{type:o.value.confirm_password?"password":"text",modelValue:t.value.confirm_password,"onUpdate:modelValue":e[5]||(e[5]=n=>t.value.confirm_password=n),id:"confirm_password",rules:w.value.confirm_password,outlined:"",dense:"",required:""},{append:l(()=>[r(_,{name:o.value.confirm_password?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[4]||(e[4]=n=>o.value.confirm_password=!o.value.confirm_password)},null,8,["name"])]),_:1},8,["type","modelValue","rules"])])]),r(V,{type:"submit",label:"Simpan",color:"primary",class:"float-right q-ma-md",loading:u.value,disable:g.value},{loading:l(()=>[r($)]),_:1},8,["loading","disable"])]),_:1})]),_:1})])]),e[6]||(e[6]=a("hr",{class:"q-my-md"},null,-1))]),_:1})]),_:1}))}};export{es as default};
